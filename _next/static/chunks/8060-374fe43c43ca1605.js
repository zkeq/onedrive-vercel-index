"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8060],{2108:function(e,t,r){var n=r(4637),a=r(61176),o=r(60385),i=r(4313),c=function(){var e=(0,i.$G)().t;return(0,n.jsx)(a.default,{href:"/",children:(0,n.jsxs)("a",{className:"flex items-center",children:[(0,n.jsx)(o.G,{className:"h-3 w-3",icon:["far","flag"]}),(0,n.jsx)("span",{className:"ml-2 font-medium",children:e("Home")})]})})};t.Z=function(e){var t=e.query;if(t){var r=t.path;if(Array.isArray(r))return(0,n.jsxs)("ol",{className:"no-scrollbar inline-flex flex-row-reverse items-center gap-1 overflow-x-scroll text-sm text-gray-600 dark:text-gray-300 md:gap-3",children:[r.slice(0).reverse().map((function(e,t){return(0,n.jsxs)("li",{className:"flex flex-shrink-0 items-center",children:[(0,n.jsx)(o.G,{className:"h-3 w-3",icon:"angle-right"}),(0,n.jsx)(a.default,{href:"/".concat(r.slice(0,r.length-t).map((function(e){return encodeURIComponent(e)})).join("/")),passHref:!0,children:(0,n.jsx)("a",{className:"ml-1 transition-all duration-75 hover:opacity-70 md:ml-3 ".concat(0==t&&"pointer-events-none opacity-80"),children:e})})]},t)})),(0,n.jsx)("li",{className:"flex-shrink-0 transition-all duration-75 hover:opacity-80",children:(0,n.jsx)(c,{})})]})}return(0,n.jsx)("div",{className:"text-sm text-gray-600 transition-all duration-75 hover:opacity-80 dark:text-gray-300",children:(0,n.jsx)(c,{})})}},95968:function(e,t,r){r.d(t,{Z:function(){return h}});var n=r(4637),a=r(59496),o=r(4313),i=r(74792),c=r(17744),s=r(60385),l=r(28089),d=r(5119),u=r(78165),f=r(99770);function p(e){var t=e.title,r=e.value,a=(0,l.useClipboard)({copiedTimeout:1e3});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h4",{className:"py-2 text-xs font-medium uppercase tracking-wider",children:t}),(0,n.jsxs)("div",{className:"group relative mb-2 max-h-24 overflow-y-scroll break-all rounded border border-gray-400/20 bg-gray-50 p-2.5 font-mono dark:bg-gray-800",children:[(0,n.jsx)("div",{className:"opacity-80",children:r}),(0,n.jsx)("button",{onClick:function(){return a.copy(r)},className:"absolute top-[0.2rem] right-[0.2rem] w-8 rounded border border-gray-400/40 bg-gray-100 py-1.5 opacity-0 transition-all duration-100 hover:bg-gray-200 group-hover:opacity-100 dark:bg-gray-850 dark:hover:bg-gray-700",children:a.copied?(0,n.jsx)(s.G,{icon:"check"}):(0,n.jsx)(s.G,{icon:"copy"})})]})]})}function h(e){var t=e.path,r=e.menuOpen,s=e.setMenuOpen,l=(0,o.$G)().t,h=(0,u.hV)(t),x=(0,a.useRef)(null),m=(0,f.I)(t),g=m.substring(m.lastIndexOf("/")+1),y=(0,a.useState)(g),v=y[0],b=y[1];return(0,n.jsx)(i.u,{appear:!0,show:r,as:a.Fragment,children:(0,n.jsx)(c.V,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:function(){return s(!1)},initialFocus:x,children:(0,n.jsxs)("div",{className:"min-h-screen px-4 text-center",children:[(0,n.jsx)(i.u.Child,{as:a.Fragment,enter:"ease-out duration-100",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsx)(c.V.Overlay,{className:"fixed inset-0 bg-white/60 dark:bg-gray-800/60"})}),(0,n.jsx)("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"\u200b"}),(0,n.jsx)(i.u.Child,{as:a.Fragment,enter:"ease-out duration-100",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-100",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,n.jsxs)("div",{className:"inline-block max-h-[80vh] w-full max-w-3xl transform overflow-hidden overflow-y-scroll rounded border border-gray-400/30 bg-white p-4 text-left align-middle text-sm shadow-xl transition-all dark:bg-gray-900 dark:text-white",children:[(0,n.jsx)(c.V.Title,{as:"h3",className:"py-2 text-xl font-bold",children:l("Customise direct link")}),(0,n.jsxs)(c.V.Description,{as:"p",className:"py-2 opacity-80",children:[l("Change the raw file direct link to a URL ending with the extension of the file.")," ",(0,n.jsx)("a",{href:"https://ovi.swo.moe/docs/features/customise-direct-link",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 underline",children:l("What is this?")})]}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("h4",{className:"py-2 text-xs font-medium uppercase tracking-wider",children:l("Filename")}),(0,n.jsx)("input",{className:"mb-2 w-full rounded border border-gray-600/10 p-2.5 font-mono focus:outline-none focus:ring focus:ring-blue-300 dark:bg-gray-600 dark:text-white dark:focus:ring-blue-700",ref:x,value:v,onChange:function(e){return b(e.target.value)}}),(0,n.jsx)(p,{title:l("Default"),value:"".concat((0,d.S)(),"/api/raw/?path=").concat(m).concat(h?"&odpt=".concat(h):"")}),(0,n.jsx)(p,{title:l("URL encoded"),value:"".concat((0,d.S)(),"/api/raw/?path=").concat(t).concat(h?"&odpt=".concat(h):"")}),(0,n.jsx)(p,{title:l("Customised"),value:"".concat((0,d.S)(),"/api/name/").concat(v,"/?path=").concat(m).concat(h?"&odpt=".concat(h):"")}),(0,n.jsx)(p,{title:l("Customised and encoded"),value:"".concat((0,d.S)(),"/api/name/").concat(v,"/?path=").concat(t).concat(h?"&odpt=".concat(h):"")})]})]})})]})})})}},20203:function(e,t,r){r.d(t,{o:function(){return x}});var n=r(4637),a=r(59496),o=r(60385),i=r(70646),c=r(28089),s=r(4313),l=r(40632),d=r(41999),u=r(5119),f=r(78165),p=r(95968),h=function(e){var t={gray:"hover:text-gray-600 dark:hover:text-white focus:ring-gray-200 focus:text-gray-600 dark:focus:text-white border-gray-300 dark:border-gray-500 dark:focus:ring-gray-500",blue:"hover:text-blue-600 focus:ring-blue-200 focus:text-blue-600 border-blue-300 dark:border-blue-700 dark:focus:ring-blue-500",teal:"hover:text-teal-600 focus:ring-teal-200 focus:text-teal-600 border-teal-300 dark:border-teal-700 dark:focus:ring-teal-500",red:"hover:text-red-600 focus:ring-red-200 focus:text-red-600 border-red-300 dark:border-red-700 dark:focus:ring-red-500",green:"hover:text-green-600 focus:ring-green-200 focus:text-green-600 border-green-300 dark:border-green-700 dark:focus:ring-green-500",pink:"hover:text-pink-600 focus:ring-pink-200 focus:text-pink-600 border-pink-300 dark:border-pink-700 dark:focus:ring-pink-500",yellow:"hover:text-yellow-400 focus:ring-yellow-100 focus:text-yellow-400 border-yellow-300 dark:border-yellow-400 dark:focus:ring-yellow-300"};return e?t[e]:t.gray},x=function(e){var t=e.onClickCallback,r=e.btnColor,a=e.btnText,i=e.btnIcon,c=e.btnImage,s=e.btnTitle;return(0,n.jsxs)("button",{className:"flex items-center space-x-2 rounded-lg border bg-white py-2 px-4 text-sm font-medium text-gray-900 hover:bg-gray-100/10 focus:z-10 focus:ring-2 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-900 ".concat(h(r)),title:s,onClick:t,children:[i&&(0,n.jsx)(o.G,{icon:i}),c&&(0,n.jsx)(l.default,{src:c,alt:c,width:20,height:20,priority:!0}),(0,n.jsx)("span",{children:a})]})};t.Z=function(){var e=(0,d.useRouter)().asPath,t=(0,f.hV)(e),r=(0,c.useClipboard)(),o=(0,a.useState)(!1),l=o[0],h=o[1],m=(0,s.$G)().t;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Z,{menuOpen:l,setMenuOpen:h,path:e}),(0,n.jsxs)("div",{className:"flex flex-wrap justify-center gap-2",children:[(0,n.jsx)(x,{onClickCallback:function(){return window.open("/api/raw/?path=".concat(e).concat(t?"&odpt=".concat(t):""))},btnColor:"blue",btnText:m("Download"),btnIcon:"file-download",btnTitle:m("Download the file directly through OneDrive")}),(0,n.jsx)(x,{onClickCallback:function(){r.copy("".concat((0,u.S)(),"/api/raw/?path=").concat(e).concat(t?"&odpt=".concat(t):"")),i.ZP.success(m("Copied direct link to clipboard."))},btnColor:"pink",btnText:m("Copy direct link"),btnIcon:"copy",btnTitle:m("Copy the permalink to the file to the clipboard")}),(0,n.jsx)(x,{onClickCallback:function(){return h(!0)},btnColor:"teal",btnText:m("Customise link"),btnIcon:"pen"})]})]})}},66305:function(e,t,r){r.d(t,{Yi:function(){return ct},fh:function(){return it},ys:function(){return st},ZP:function(){return lt}});var n=r(24354),a=r.n(n),o=r(4637),i=r(59496),c=r(60385),s=r(70646),l=r(17141),d=r.n(l),u=r(25526),f=r(41999),p=r(4313),h=r(79038),x=r(92063),m="markdown",g="image",y="text",v="pdf",b="code",j="video",w="audio",k="ms-office",N="epub",C="url",S={gif:g,jpeg:g,jpg:g,png:g,webp:g,md:m,markdown:m,mdown:m,pdf:v,doc:k,docx:k,ppt:k,pptx:k,xls:k,xlsx:k,c:b,cpp:b,js:b,jsx:b,java:b,sh:b,cs:b,py:b,css:b,html:b,ts:b,tsx:b,rs:b,vue:b,json:b,yml:b,yaml:b,toml:b,txt:y,vtt:y,srt:y,log:y,diff:y,mp4:j,flv:j,webm:j,m3u8:j,mkv:j,mov:j,avi:j,mp3:w,m4a:w,aac:w,wav:w,ogg:w,oga:w,opus:w,flac:w,epub:N,url:C};function I(e){var t=(0,x.RT)(e);switch(t){case"ts":case"tsx":return"typescript";case"rs":return"rust";case"js":case"jsx":return"javascript";case"sh":return"shell";case"cs":return"csharp";case"py":return"python";case"yml":return"yaml";default:return t}}var P=r(50289),O=r(78165),R=r(29597),F=r.n(R);function T(e){var t,r;function n(t,r){try{var o=e[t](r),i=o.value,c=i instanceof L;Promise.resolve(c?i.wrapped:i).then((function(e){c?n("next",e):a(o.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(s){a("throw",s)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,a){return new Promise((function(o,i){var c={key:e,arg:a,resolve:o,reject:i,next:null};r?r=r.next=c:(t=r=c,n(e,a))}))},"function"!==typeof e.return&&(this.return=void 0)}function G(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(l){return void r(l)}c.done?t(s):Promise.resolve(s).then(n,a)}function Z(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){G(o,n,a,i,c,"next",e)}function c(e){G(o,n,a,i,c,"throw",e)}i(void 0)}))}}function E(e){return new L(e)}function L(e){this.wrapped=e}function U(e){return function(){return new T(e.apply(this,arguments))}}function A(e){var t=e.router,r=e.progress,n=(0,p.$G)().t;return(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsxs)("div",{className:"w-56",children:[(0,o.jsx)("span",{children:r?n("Downloading {{progress}}%",{progress:r}):n("Downloading selected files...")}),(0,o.jsx)("div",{className:"relative mt-2",children:(0,o.jsx)("div",{className:"flex h-1 overflow-hidden rounded bg-gray-100",children:(0,o.jsx)("div",{style:{width:"".concat(r,"%")},className:"bg-gray-500 text-white transition-all duration-100"})})})]}),(0,o.jsx)("button",{className:"rounded bg-red-500 p-2 text-white hover:bg-red-400 focus:outline-none focus:ring focus:ring-red-300",onClick:function(){return t.reload()},children:n("Cancel")})]})}function M(e){var t=e.blob,r=e.name,n=document.createElement("a");n.style.display="none",document.body.appendChild(n);var a=window.URL.createObjectURL(t);n.href=a,n.download=r,n.click(),window.URL.revokeObjectURL(a),n.remove()}function D(){return(D=Z(a().mark((function e(t){var r,n,i,c,l,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.toastId,n=t.router,i=t.files,c=t.folder,l=new(F()),d=c?l.folder(c):l,i.forEach((function(e){var t=e.name,r=e.url;d.file(t,fetch(r).then((function(e){return e.blob()})))})),e.next=6,l.generateAsync({type:"blob"},(function(e){s.ZP.loading((0,o.jsx)(A,{router:n,progress:e.percent.toFixed(0)}),{id:r})}));case 6:M({blob:e.sent,name:c?c+".zip":"download.zip"});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return $.apply(this,arguments)}function $(){return($=U(a().mark((function e(t){var r,n,o,i,c,s,l,d,u,f,p,h,x,m,g,y;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,O.hV)(t),n=function(){var e=Z(a().mark((function e(t,n,o){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=n,e.next=4,(0,P._)(o?"/api/?path=".concat(n,"&next=").concat(o):"/api?path=".concat(n),null!==r&&void 0!==r?r:void 0).catch((function(e){return{i:t,path:n,error:e}}));case 4:return e.t2=e.sent,e.abrupt("return",{i:e.t0,path:e.t1,data:e.t2});case 6:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),o=[n(0,t)],i={};case 4:if(!(o.filter((function(){return!0})).length>0)){e.next=39;break}return e.prev=6,e.next=9,E(Promise.race(o.filter((function(){return!0}))));case 9:c=e.sent,e.next=23;break;case 12:if(e.prev=12,e.t0=e.catch(6),s=e.t0.i,l=e.t0.path,d=e.t0.error,4!==Math.floor(d.status/100)){e.next=22;break}return delete o[s],e.next=19,{path:l,meta:{},isFolder:!0,error:{status:d.status,message:d.message.error}};case 19:return e.abrupt("continue",4);case 22:throw e.t0;case 23:if(u=c.i,f=c.path,(p=c.data)&&p.folder){e.next=26;break}throw new Error("Path is not folder");case 26:if(delete o[u],h=p.folder.value.map((function(e){return{path:"".concat("/"===f?"":f,"/").concat(encodeURIComponent(e.name)),meta:e,isFolder:Boolean(e.folder)}})),!p.next){e.next=32;break}i[f]=(null!==(x=i[f])&&void 0!==x?x:[]).concat(h),m=o.length,o[m]=n(m,f,p.next),e.next=37;break;case 32:return y=(null!==(g=i[f])&&void 0!==g?g:[]).concat(h),i[f]&&delete i[f],y.filter((function(e){return e.isFolder})).forEach((function(e){var t=o.length;o[t]=n(t,e.path)})),e.delegateYield(y,"t1",37);case 37:e.next=4;break;case 39:case"end":return e.stop()}}),e,null,[[6,12]])})))).apply(this,arguments)}"function"===typeof Symbol&&Symbol.asyncIterator&&(T.prototype[Symbol.asyncIterator]=function(){return this}),T.prototype.next=function(e){return this._invoke("next",e)},T.prototype.throw=function(e){return this._invoke("throw",e)},T.prototype.return=function(e){return this._invoke("return",e)};var V=r(19889),W=r(76886),_=r(33999),H=function(e){e.errorMsg;return(0,o.jsx)("div",{className:"my-12",children:(0,o.jsx)(_.default,{src:"/js.js"})})},B=r(40632);function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(s){c=!0,a=s}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Y=function(e){var t=e.redirect,r=(0,O.ss)(t),n=(0,f.useRouter)(),a=(0,i.useState)(""),s=a[0],l=a[1],d=J((0,h.Z)(r,""),2),u=(d[0],d[1]),x=(0,p.$G)().t;return(0,o.jsxs)("div",{className:"mx-auto flex max-w-sm flex-col space-y-4 md:my-10",children:[(0,o.jsx)("div",{className:"mx-auto w-3/4 md:w-5/6",children:(0,o.jsx)(B.default,{src:"/images/fabulous-wapmire-weekdays.png",alt:"authenticate",width:912,height:912,priority:!0})}),(0,o.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:x("Enter Password")}),(0,o.jsx)("p",{className:"text-sm font-medium text-gray-500",children:x("This route (the folder itself and the files inside) is password protected. ")+x("If you know the password, please enter it below.")}),(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{className:"flex-1 rounded border border-gray-600/10 p-2 font-mono focus:outline-none focus:ring focus:ring-blue-300 dark:bg-gray-600 dark:text-white dark:focus:ring-blue-700",autoFocus:!0,type:"password",placeholder:"************",value:s,onChange:function(e){l(e.target.value)},onKeyPress:function(e){"Enter"!==e.key&&"NumpadEnter"!==e.key||(u(s),n.reload())}}),(0,o.jsx)("button",{className:"rounded bg-blue-600 px-4 py-2 text-white hover:bg-blue-500 focus:outline-none focus:ring focus:ring-blue-400",onClick:function(){u(s),n.reload()},children:(0,o.jsx)(c.G,{icon:"arrow-right"})})]})]})},K=r(20203),X=r(72698),Q=r.n(X);function ee(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(l){return void r(l)}c.done?t(s):Promise.resolve(s).then(n,a)}function te(e,t){var r=(0,i.useState)(""),n=r[0],o=r[1],c=(0,i.useState)(!0),s=c[0],l=c[1],d=(0,i.useState)(""),u=d[0],f=d[1];return(0,i.useEffect)((function(){var r=(0,O.hV)(t),n=e+(r?"&odpt=".concat(r):"");Q().get(n,{responseType:"blob"}).then(function(){var e,t=(e=a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o,e.next=3,t.data.text();case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){ee(o,n,a,i,c,"next",e)}function c(e){ee(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()).catch((function(e){return f(e.message)})).finally((function(){return l(!1)}))}),[e,t]),{response:n,error:u,validating:s}}var re=r(36810),ne=function(e){e.file;var t=(0,f.useRouter)().asPath,r=(0,p.$G)().t,n=te("/api/raw/?path=".concat(t),t),a=n.response,i=n.error,c=n.validating;return i?(0,o.jsx)(re.p,{children:(0,o.jsx)(H,{errorMsg:i})}):c?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(re.p,{children:(0,o.jsx)(W.Z,{loadingText:r("Loading file content...")})}),(0,o.jsx)(re.W,{children:(0,o.jsx)(K.Z,{})})]}):a?(0,o.jsxs)("div",{children:[(0,o.jsx)(re.p,{children:(0,o.jsx)("pre",{className:"overflow-x-scroll p-0 text-sm md:p-3",children:a})}),(0,o.jsx)(re.W,{children:(0,o.jsx)(K.Z,{})})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(re.p,{children:(0,o.jsx)(H,{errorMsg:r("File is empty.")})}),(0,o.jsx)(re.W,{children:(0,o.jsx)(K.Z,{})})]})},ae=r(41423),oe=r(27862),ie=r(75958),ce=r(96654),se=r(19431),le=r(54855),de=r(88357);r(29513);function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ue(e,t,r[t])}))}return e}function pe(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var he,xe=function(e){var t=e.file,r=e.path,n=e.standalone,a=void 0===n||n,i=e.proxy,c=void 0!==i&&i,s=a?r.substring(0,r.lastIndexOf("/")):r,l=te("/api/raw/?path=".concat(s,"/").concat(t.name).concat(c?"&proxy=true":""),r),d=l.response,u=l.error,f=l.validating,h=(0,p.$G)().t,x={img:function(e){var t,r=e.alt,n=e.src,a=e.title,i=e.width,c=e.height,l=e.style;return(0,o.jsx)("img",{alt:r,src:(t=n,t.indexOf("://")>0||0===t.indexOf("//")?n:"/api/?path=".concat(s,"/").concat(n,"&raw=true")),title:a,width:i,height:c,style:l})},code:function(e){var t=e.className,r=e.children,n=e.inline,a=pe(e,["className","children","inline"]);if(n)return(0,o.jsx)("code",fe({className:t},a,{children:r}));var i=/language-(\w+)/.exec(t||"");return(0,o.jsx)(le.Z,fe({language:i?i[1]:"language-text",style:de.h5,PreTag:"div"},a,{children:String(r).replace(/\n$/,"")}))}};return u?(0,o.jsx)(re.p,{children:(0,o.jsx)(H,{errorMsg:u})}):f?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(re.p,{children:(0,o.jsx)(W.Z,{loadingText:h("Loading file content...")})}),a&&(0,o.jsx)(re.W,{children:(0,o.jsx)(K.Z,{})})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)(re.p,{children:(0,o.jsx)("div",{className:"markdown-body",children:(0,o.jsx)(ae.D,{remarkPlugins:[oe.Z,ie.Z],rehypePlugins:[ce.Z,se.Z],components:x,children:d})})}),a&&(0,o.jsx)(re.W,{children:(0,o.jsx)(K.Z,{})})]})},me=r(35784),ge=function(e){var t=e.file,r=(0,f.useRouter)().asPath,n=te("/api/raw/?path=".concat(r),r),a=n.response,i=n.error,c=n.validating,s=(0,me.Z)("dark"),l=(0,p.$G)().t;return i?(0,o.jsx)(re.p,{children:(0,o.jsx)(H,{errorMsg:i})}):c?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(re.p,{children:(0,o.jsx)(W.Z,{loadingText:l("Loading file content...")})}),(0,o.jsx)(re.W,{children:(0,o.jsx)(K.Z,{})})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(re.p,{children:(0,o.jsx)(le.Z,{language:I(t.name),style:"dark"===s?de.A1:de.Ro,children:a})}),(0,o.jsx)(re.W,{children:(0,o.jsx)(K.Z,{})})]})},ye=r(43578),ve=r(5119),be=function(e){e.file;var t=(0,f.useRouter)().asPath,r=(0,O.hV)(t),n=(0,i.useRef)(null),a=(0,i.useState)(600),c=a[0],s=a[1],l=encodeURIComponent("".concat((0,ve.S)(),"/api/raw/?path=").concat(t).concat(r?"&odpt=".concat(r):""));return(0,i.useEffect)((function(){s(n.current?n.current.offsetWidth:600)}),[]),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"overflow-scroll",ref:n,style:{maxHeight:"90vh"},children:(0,o.jsx)(ye.Z,{url:l,width:c.toString(),height:"600"})}),(0,o.jsx)(re.W,{children:(0,o.jsx)(K.Z,{})})]})},je=r(7948),we=r.n(je),ke=r(51722),Ne=r.n(ke),Ce=r(25566),Se=r.n(Ce),Ie=function(e){if(e<1024)return e+" B";var t=Math.floor(Math.log(e)/Math.log(1024)),r=e/Math.pow(1024,t),n=Math.round(r),a=n<10?r.toFixed(2):n<100?r.toFixed(1):n;return"".concat(a," ").concat("KMGTPEZY"[t-1],"B")},Pe=function(e){return Ne()(e).format(Se().datetimeFormat)};!function(e){e[e.Loading=0]="Loading",e[e.Ready=1]="Ready",e[e.Playing=2]="Playing",e[e.Paused=3]="Paused"}(he||(he={}));var Oe=function(e){var t=e.file,r=(0,p.$G)().t,n=(0,f.useRouter)().asPath,a=(0,O.hV)(n),s=(0,i.useRef)(null),l=(0,i.useState)(he.Loading),d=l[0],u=l[1],h="/api/thumbnail/?path=".concat(n,"&size=medium").concat(a?"&odpt=".concat(a):""),x=(0,i.useState)(!1),m=x[0],g=x[1];return(0,i.useEffect)((function(){var e=s.current.audioEl.current;e&&(e.oncanplay=function(){return u(he.Ready)},e.onended=function(){return u(he.Paused)},e.onpause=function(){return u(he.Paused)},e.onplay=function(){return u(he.Playing)},e.onplaying=function(){return u(he.Playing)},e.onseeking=function(){return u(he.Loading)},e.onwaiting=function(){return u(he.Loading)},e.onerror=function(){return u(he.Paused)})}),[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(re.p,{children:(0,o.jsxs)("div",{className:"flex flex-col space-y-4 md:flex-row md:space-x-4",children:[(0,o.jsxs)("div",{className:"relative flex aspect-square w-full items-center justify-center rounded bg-gray-100 transition-all duration-75 dark:bg-gray-700 md:w-48",children:[(0,o.jsx)("div",{className:"absolute z-20 flex h-full w-full items-center justify-center transition-all duration-300 ".concat(d===he.Loading?"bg-white opacity-80 dark:bg-gray-800":"bg-transparent opacity-0"),children:(0,o.jsx)(W.H,{className:"z-10 inline-block h-5 w-5 animate-spin"})}),m?(0,o.jsx)(c.G,{className:"z-10 h-5 w-5 ".concat(d===he.Playing?"animate-spin":""),icon:"music",size:"2x"}):(0,o.jsx)("div",{className:"absolute m-4 rounded-full shadow-lg",children:(0,o.jsx)("img",{className:"h-full w-full rounded-full object-cover object-top ".concat(d===he.Playing?"animate-spin-slow":""),src:h,alt:t.name,onError:function(){return g(!0)}})})]}),(0,o.jsxs)("div",{className:"flex w-full flex-col justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"mb-2 font-medium",children:t.name}),(0,o.jsx)("div",{className:"mb-4 text-sm text-gray-500",children:r("Last modified:")+" "+Pe(t.lastModifiedDateTime)})]}),(0,o.jsx)(we(),{className:"h-11 w-full",src:"/api/raw/?path=".concat(n).concat(a?"&odpt=".concat(a):""),ref:s,controls:!0,preload:"auto"})]})]})}),(0,o.jsx)(re.W,{children:(0,o.jsx)(K.Z,{})})]})},Re=r(23926),Fe=r(14870),Te=r(28089),Ge=r(95968);r(59614);function Ze(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(l){return void r(l)}c.done?t(s):Promise.resolve(s).then(n,a)}var Ee=function(e){var t=e.videoName,r=e.videoUrl,n=e.width,a=e.height,c=e.thumbnail,s=e.subtitle,l=e.isFlv,d=e.mpegts;(0,i.useEffect)((function(){if(Q().get(s,{responseType:"blob"}).then((function(e){var t=document.querySelector("track");null===t||void 0===t||t.setAttribute("src",URL.createObjectURL(e.data))})).catch((function(){console.log("Could not load subtitle.")})),l){!function(){var e=document.getElementById("plyr"),t=d.createPlayer({url:r,type:"flv"});t.attachMediaElement(e),t.load()}()}}),[r,l,d,s]);var u={type:"video",title:t,poster:c,tracks:[{kind:"captions",label:t,src:"",default:!0}]},f={ratio:"".concat(null!==n&&void 0!==n?n:16,":").concat(null!==a&&void 0!==a?a:9)};return l||(u.sources=[{src:r}]),(0,o.jsx)(Re.Z,{id:"plyr",source:u,options:f})},Le=function(e){var t,n,c,l=e.file,d=(0,f.useRouter)().asPath,u=(0,O.hV)(d),h=(0,Te.useClipboard)(),m=(0,i.useState)(!1),g=m[0],y=m[1],v=(0,p.$G)().t,b="/api/thumbnail/?path=".concat(d,"&size=large").concat(u?"&odpt=".concat(u):""),j="".concat(d.substring(0,d.lastIndexOf(".")),".vtt"),w="/api/raw/?path=".concat(j).concat(u?"&odpt=".concat(u):""),k="/api/raw/?path=".concat(d).concat(u?"&odpt=".concat(u):""),N="flv"===(0,x.RT)(l.name),C=(0,Fe.r5)((c=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N){e.next=4;break}return e.next=3,r.e(6425).then(r.t.bind(r,88598,23));case 3:return e.abrupt("return",e.sent.default);case 4:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(r,n){var a=c.apply(e,t);function o(e){Ze(a,r,n,o,i,"next",e)}function i(e){Ze(a,r,n,o,i,"throw",e)}o(void 0)}))}),[N]),S=C.loading,I=C.error,P=C.result;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ge.Z,{path:d,menuOpen:g,setMenuOpen:y}),(0,o.jsx)(re.p,{children:I?(0,o.jsx)(H,{errorMsg:I.message}):S&&N?(0,o.jsx)(W.Z,{loadingText:v("Loading FLV extension...")}):(0,o.jsx)(Ee,{videoName:l.name,videoUrl:k,width:null===(t=l.video)||void 0===t?void 0:t.width,height:null===(n=l.video)||void 0===n?void 0:n.height,thumbnail:b,subtitle:w,isFlv:N,mpegts:P})}),(0,o.jsx)(re.W,{children:(0,o.jsxs)("div",{className:"flex flex-wrap justify-center gap-2",children:[(0,o.jsx)(K.o,{onClickCallback:function(){return window.open(k)},btnColor:"blue",btnText:v("Download"),btnIcon:"file-download"}),(0,o.jsx)(K.o,{onClickCallback:function(){h.copy("".concat((0,ve.S)(),"/api/raw/?path=").concat(d).concat(u?"&odpt=".concat(u):"")),s.ZP.success(v("Copied direct link to clipboard."))},btnColor:"pink",btnText:v("Copy direct link"),btnIcon:"copy"}),(0,o.jsx)(K.o,{onClickCallback:function(){return y(!0)},btnColor:"teal",btnText:v("Customise link"),btnIcon:"pen"}),(0,o.jsx)(K.o,{onClickCallback:function(){return window.open("iina://weblink?url=".concat((0,ve.S)()).concat(k))},btnText:"IINA",btnImage:"/players/iina.png"}),(0,o.jsx)(K.o,{onClickCallback:function(){return window.open("vlc://".concat((0,ve.S)()).concat(k))},btnText:"VLC",btnImage:"/players/vlc.png"}),(0,o.jsx)(K.o,{onClickCallback:function(){return window.open("potplayer://".concat((0,ve.S)(),"/").concat(k))},btnText:"PotPlayer",btnImage:"/players/potplayer.png"})]})})]})},Ue=function(e){e.file;var t=(0,f.useRouter)().asPath,r=(0,O.hV)(t),n=encodeURIComponent("".concat((0,ve.S)(),"/api/raw/?path=").concat(t).concat(r?"&odpt=".concat(r):"")),a="https://pdf.zkeq.xyz/?file=".concat(n);return(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"w-full overflow-hidden rounded",style:{height:"90vh"},children:(0,o.jsx)("iframe",{src:a,frameBorder:"0",width:"100%",height:"100%"})}),(0,o.jsx)(re.W,{children:(0,o.jsx)(K.Z,{})})]})},Ae=function(e){var t;return null===(t=e.split("\n").find((function(e){return e.startsWith("URL=")})))||void 0===t?void 0:t.split("=")[1]},Me=function(e){e.file;var t,r,n=(0,f.useRouter)().asPath,a=(0,p.$G)().t,i=te("/api/raw/?path=".concat(n),n),c=i.response,s=i.error,l=i.validating;return s?(0,o.jsx)(re.p,{children:(0,o.jsx)(H,{errorMsg:s})}):l?(0,o.jsx)(re.p,{children:(0,o.jsx)(W.Z,{loadingText:a("Loading file content...")})}):c?(0,o.jsxs)("div",{children:[(0,o.jsx)(re.p,{children:(0,o.jsx)("pre",{className:"overflow-x-scroll p-0 text-sm md:p-3",children:c})}),(0,o.jsx)(re.W,{children:(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)(K.o,{onClickCallback:function(){return window.open(null!==(t=Ae(c))&&void 0!==t?t:"")},btnColor:"blue",btnText:a("Open URL"),btnIcon:"external-link-alt",btnTitle:a("Open URL{{url}}",{url:null!==(r=" "+Ae(c))&&void 0!==r?r:""})})})})]}):(0,o.jsx)(re.p,{children:(0,o.jsx)(H,{errorMsg:a("File is empty.")})})},De=function(e){var t,r,n=e.file,a=(0,f.useRouter)().asPath,i=(0,O.hV)(a);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(re.p,{children:(0,o.jsx)("img",{className:"mx-auto",src:"/api/raw/?path=".concat(a).concat(i?"&odpt=".concat(i):""),alt:n.name,width:null===(t=n.image)||void 0===t?void 0:t.width,height:null===(r=n.image)||void 0===r?void 0:r.height})}),(0,o.jsx)(re.W,{children:(0,o.jsx)(K.Z,{})})]})},ze=function(e){var t,r,n,a,i,s,l,d,u=e.file,f=(0,p.$G)().t;return(0,o.jsxs)("div",{children:[(0,o.jsx)(re.p,{children:(0,o.jsxs)("div",{className:"items-center px-5 py-4 md:flex md:space-x-8",children:[(0,o.jsxs)("div",{className:"rounded-lg border border-gray-900/10 px-8 py-20 text-center dark:border-gray-500/30",children:[(0,o.jsx)(c.G,{icon:(0,x.LP)(u.name,{video:Boolean(u.video)})}),(0,o.jsx)("div",{className:"mt-6 text-sm font-medium line-clamp-3 md:w-28",children:u.name})]}),(0,o.jsxs)("div",{className:"flex flex-col space-y-2 py-4 md:flex-1",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"py-2 text-xs font-medium uppercase opacity-80",children:f("Last modified")}),(0,o.jsx)("div",{children:Pe(u.lastModifiedDateTime)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"py-2 text-xs font-medium uppercase opacity-80",children:f("File size")}),(0,o.jsx)("div",{children:Ie(u.size)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"py-2 text-xs font-medium uppercase opacity-80",children:f("MIME type")}),(0,o.jsx)("div",{children:null!==(i=null===(t=u.file)||void 0===t?void 0:t.mimeType)&&void 0!==i?i:f("Unavailable")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"py-2 text-xs font-medium uppercase opacity-80",children:f("Hashes")}),(0,o.jsx)("table",{className:"block w-full overflow-scroll whitespace-nowrap text-sm md:table",children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{className:"border-y bg-white dark:border-gray-700 dark:bg-gray-900",children:[(0,o.jsx)("td",{className:"bg-gray-50 py-1 px-3 text-left text-xs font-medium uppercase tracking-wider text-gray-700 dark:bg-gray-800 dark:text-gray-400",children:"Quick XOR"}),(0,o.jsx)("td",{className:"whitespace-nowrap py-1 px-3 font-mono text-gray-500 dark:text-gray-400",children:null!==(s=null===(r=u.file.hashes)||void 0===r?void 0:r.quickXorHash)&&void 0!==s?s:f("Unavailable")})]}),(0,o.jsxs)("tr",{className:"border-y bg-white dark:border-gray-700 dark:bg-gray-900",children:[(0,o.jsx)("td",{className:"bg-gray-50 py-1 px-3 text-left text-xs font-medium uppercase tracking-wider text-gray-700 dark:bg-gray-800 dark:text-gray-400",children:"SHA1"}),(0,o.jsx)("td",{className:"whitespace-nowrap py-1 px-3 font-mono text-gray-500 dark:text-gray-400",children:null!==(l=null===(n=u.file.hashes)||void 0===n?void 0:n.sha1Hash)&&void 0!==l?l:f("Unavailable")})]}),(0,o.jsxs)("tr",{className:"border-y bg-white dark:border-gray-700 dark:bg-gray-900",children:[(0,o.jsx)("td",{className:"bg-gray-50 py-1 px-3 text-left text-xs font-medium uppercase tracking-wider text-gray-700 dark:bg-gray-800 dark:text-gray-400",children:"SHA256"}),(0,o.jsx)("td",{className:"whitespace-nowrap py-1 px-3 font-mono text-gray-500 dark:text-gray-400",children:null!==(d=null===(a=u.file.hashes)||void 0===a?void 0:a.sha256Hash)&&void 0!==d?d:f("Unavailable")})]})]})})]})]})]})}),(0,o.jsx)(re.W,{children:(0,o.jsx)(K.Z,{})})]})},$e=r(61176),Ve=r(99770),We=r(15748),_e=function(e){var t=e.fileContent;return(0,o.jsxs)("div",{className:"grid cursor-pointer grid-cols-10 items-center space-x-2 px-3 py-2.5",children:[(0,o.jsxs)("div",{className:"col-span-10 flex items-center space-x-2 truncate md:col-span-6",title:t.name,children:[(0,o.jsx)("div",{className:"w-5 flex-shrink-0 text-center",children:(0,o.jsx)(ct,{child:t})}),(0,o.jsx)(it,{name:t.name,folder:Boolean(t.folder)})]}),(0,o.jsx)("div",{className:"col-span-3 hidden flex-shrink-0 font-mono text-sm text-gray-700 dark:text-gray-500 md:block",children:Pe(t.lastModifiedDateTime)}),(0,o.jsx)("div",{className:"col-span-1 hidden flex-shrink-0 truncate font-mono text-sm text-gray-700 dark:text-gray-500 md:block",children:Ie(t.size)})]})},He=function(e){var t=e.path,r=e.folderChildren,n=(e.selected,e.toggleItemSelected,e.totalSelected,e.toggleTotalSelected,e.totalGenerating,e.handleSelectedDownload,e.folderGenerating),a=e.handleFolderDownload,i=e.toast,s=(0,Te.useClipboard)(),l=(0,O.hV)(t),d=(0,p.$G)().t,u=function(e){return"".concat("/"===t?"":t,"/").concat(encodeURIComponent(e))};return r=r.filter((function(e){return null===e.name.match(new RegExp(We.hideFileRegex,"i"))})),(0,o.jsxs)("div",{className:"rounded bg-white dark:bg-gray-900 dark:text-gray-100",children:[(0,o.jsxs)("div",{className:"grid grid-cols-11 items-center space-x-2 border-b border-gray-900/10 px-3 dark:border-gray-500/30",children:[(0,o.jsx)("div",{className:"col-span-12 py-2 text-xs font-bold uppercase tracking-widest text-gray-600 dark:text-gray-300 md:col-span-6",children:d("Name")}),(0,o.jsx)("div",{className:"col-span-3 hidden text-xs font-bold uppercase tracking-widest text-gray-600 dark:text-gray-300 md:block",children:d("Last Modified")}),(0,o.jsx)("div",{className:"hidden text-xs font-bold uppercase tracking-widest text-gray-600 dark:text-gray-300 md:block",children:d("Size")}),(0,o.jsx)("div",{className:"hidden text-xs font-bold uppercase tracking-widest text-gray-600 dark:text-gray-300 md:block",children:d("Actions")})]}),r.map((function(e){return(0,o.jsxs)("div",{className:"grid grid-cols-11 transition-all duration-100 hover:bg-gray-100 dark:hover:bg-gray-850",children:[(0,o.jsx)($e.default,{href:"".concat("/"===t?"":t,"/").concat(encodeURIComponent(e.name)),passHref:!0,children:(0,o.jsx)("a",{className:"col-span-12 md:col-span-10",children:(0,o.jsx)(_e,{fileContent:e})})}),e.folder?(0,o.jsxs)("div",{className:"hidden p-1.5 text-gray-700 dark:text-gray-400 md:flex",children:[(0,o.jsx)("span",{title:d("Copy folder permalink"),className:"cursor-pointer rounded px-1.5 py-1 hover:bg-gray-300 dark:hover:bg-gray-600",onClick:function(){s.copy("".concat((0,ve.S)()).concat((0,Ve.I)("".concat("/"===t?"":t,"/").concat(encodeURIComponent(e.name))))),i(d("Copied folder permalink."),{icon:"\ud83d\udc4c"})},children:(0,o.jsx)(c.G,{icon:["far","copy"]})}),n[e.id]?(0,o.jsx)(st,{title:d("Downloading folder, refresh page to cancel"),style:"px-1.5 py-1"}):(0,o.jsx)("span",{title:d("Download folder"),className:"cursor-pointer rounded px-1.5 py-1 hover:bg-gray-300 dark:hover:bg-gray-600",onClick:function(){var r="".concat("/"===t?"":t,"/").concat(encodeURIComponent(e.name));a(r,e.id,e.name)()},children:(0,o.jsx)(c.G,{icon:["far","arrow-alt-circle-down"]})})]}):(0,o.jsxs)("div",{className:"hidden p-1.5 text-gray-700 dark:text-gray-400 md:flex",children:[(0,o.jsx)("span",{title:d("Copy raw file permalink"),className:"cursor-pointer rounded px-1.5 py-1 hover:bg-gray-300 dark:hover:bg-gray-600",onClick:function(){s.copy("".concat((0,ve.S)(),"/api/raw/?path=").concat((0,Ve.I)(u(e.name))).concat(l?"&odpt=".concat(l):"")),i.success(d("Copied raw file permalink."))},children:(0,o.jsx)(c.G,{icon:["far","copy"]})}),(0,o.jsx)("a",{title:d("Download file"),className:"cursor-pointer rounded px-1.5 py-1 hover:bg-gray-300 dark:hover:bg-gray-600",href:"/api/raw/?path=".concat(u(e.name)).concat(l?"&odpt=".concat(l):""),children:(0,o.jsx)(c.G,{icon:["far","arrow-alt-circle-down"]})})]})]},e.id)}))]})},Be=function(e){var t,r=e.c,n=e.path,a=(0,O.hV)(n),c="folder"in r?null:"/api/thumbnail/?path=".concat(n,"&size=medium").concat(a?"&odpt=".concat(a):""),s=(0,i.useState)(!1),l=s[0],d=s[1];return(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("div",{className:"h-32 overflow-hidden rounded border border-gray-900/10 dark:border-gray-500/30",children:c&&!l?(0,o.jsx)("img",{className:"h-full w-full object-cover object-top",src:c,alt:r.name,onError:function(){return d(!0)}}):(0,o.jsxs)("div",{className:"relative flex h-full w-full items-center justify-center rounded-lg",children:[(0,o.jsx)(ct,{child:r}),(0,o.jsx)("span",{className:"absolute bottom-0 right-0 m-1 font-medium text-gray-700 dark:text-gray-500",children:null===(t=r.folder)||void 0===t?void 0:t.childCount})]})}),(0,o.jsxs)("div",{className:"flex items-start justify-center space-x-2",children:[(0,o.jsx)("span",{className:"w-5 flex-shrink-0 text-center",children:(0,o.jsx)(ct,{child:r})}),(0,o.jsx)(it,{name:r.name,folder:Boolean(r.folder)})]}),(0,o.jsx)("div",{className:"truncate text-center font-mono text-xs text-gray-700 dark:text-gray-500",children:Pe(r.lastModifiedDateTime)})]})},qe=function(e){var t=e.path,r=e.folderChildren,n=e.selected,a=(e.toggleItemSelected,e.totalSelected),i=(e.toggleTotalSelected,e.totalGenerating),s=e.handleSelectedDownload,l=e.folderGenerating,d=e.handleFolderDownload,u=e.toast,f=(0,Te.useClipboard)(),h=(0,O.hV)(t),x=(0,p.$G)().t,m=function(e){return"".concat("/"===t?"":t,"/").concat(encodeURIComponent(e))};return r=r.filter((function(e){return null===e.name.match(new RegExp(We.hideFileRegex,"i"))})),(0,o.jsxs)("div",{className:"rounded bg-white dark:bg-gray-900 dark:text-gray-100",children:[(0,o.jsxs)("div",{className:"flex items-center border-b border-gray-900/10 px-3 text-xs font-bold uppercase tracking-widest text-gray-600 dark:border-gray-500/30 dark:text-gray-400",children:[(0,o.jsx)("div",{className:"flex-1",children:x("{{count}} item(s)",{count:r.length})}),(0,o.jsx)("div",{className:"flex p-1.5 text-gray-700 dark:text-gray-400",children:i?(0,o.jsx)(st,{title:x("Downloading selected files, refresh page to cancel"),style:"p-1.5"}):(0,o.jsx)("button",{title:x("Download selected files"),className:"cursor-pointer rounded p-1.5 hover:bg-gray-300 disabled:cursor-not-allowed disabled:text-gray-400 disabled:hover:bg-white dark:hover:bg-gray-600 disabled:dark:text-gray-600 disabled:hover:dark:bg-gray-900",disabled:0===a,onClick:s,children:(0,o.jsx)(c.G,{icon:["far","arrow-alt-circle-down"],size:"lg"})})})]}),(0,o.jsx)("div",{className:"grid grid-cols-2 gap-3 p-3 md:grid-cols-4",children:r.map((function(e){return(0,o.jsxs)("div",{className:"group relative overflow-hidden rounded transition-all duration-100 hover:bg-gray-100 dark:hover:bg-gray-850",children:[(0,o.jsx)("div",{className:"absolute top-0 right-0 z-10 m-1 rounded bg-white/50 py-0.5 opacity-0 transition-all duration-100 group-hover:opacity-100 dark:bg-gray-900/50",children:e.folder?(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{title:x("Copy folder permalink"),className:"cursor-pointer rounded px-1.5 py-1 hover:bg-gray-300 dark:hover:bg-gray-600",onClick:function(){f.copy("".concat((0,ve.S)()).concat(m(e.name))),u(x("Copied folder permalink."),{icon:"\ud83d\udc4c"})},children:(0,o.jsx)(c.G,{icon:["far","copy"]})}),l[e.id]?(0,o.jsx)(st,{title:x("Downloading folder, refresh page to cancel"),style:"px-1.5 py-1"}):(0,o.jsx)("span",{title:x("Download folder"),className:"cursor-pointer rounded px-1.5 py-1 hover:bg-gray-300 dark:hover:bg-gray-600",onClick:d(m(e.name),e.id,e.name),children:(0,o.jsx)(c.G,{icon:["far","arrow-alt-circle-down"]})})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{title:x("Copy raw file permalink"),className:"cursor-pointer rounded px-1.5 py-1 hover:bg-gray-300 dark:hover:bg-gray-600",onClick:function(){f.copy("".concat((0,ve.S)(),"/api/raw/?path=").concat(m(e.name)).concat(h?"&odpt=".concat(h):"")),u.success(x("Copied raw file permalink."))},children:(0,o.jsx)(c.G,{icon:["far","copy"]})}),(0,o.jsx)("a",{title:x("Download file"),className:"cursor-pointer rounded px-1.5 py-1 hover:bg-gray-300 dark:hover:bg-gray-600",href:"".concat((0,ve.S)(),"/api/raw/?path=").concat(m(e.name)).concat(h?"&odpt=".concat(h):""),children:(0,o.jsx)(c.G,{icon:["far","arrow-alt-circle-down"]})})]})}),(0,o.jsx)("div",{className:"".concat(n[e.id]?"opacity-100":"opacity-0"," absolute top-0 left-0 z-10 m-1 rounded bg-white/50 py-0.5 group-hover:opacity-100 dark:bg-gray-900/50")}),(0,o.jsx)($e.default,{href:m(e.name),passHref:!0,children:(0,o.jsx)("a",{children:(0,o.jsx)(Be,{c:e,path:m(e.name)})})})]},e.id)}))})]})};function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ye(e){var t,r;function n(t,r){try{var o=e[t](r),i=o.value,c=i instanceof Xe;Promise.resolve(c?i.wrapped:i).then((function(e){c?n("next",e):a(o.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(s){a("throw",s)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,a){return new Promise((function(o,i){var c={key:e,arg:a,resolve:o,reject:i,next:null};r?r=r.next=c:(t=r=c,n(e,a))}))},"function"!==typeof e.return&&(this.return=void 0)}function Ke(e){var t;if("function"===typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}function Xe(e){this.wrapped=e}function Qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Qe(e,t,r[t])}))}return e}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(s){c=!0,a=s}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}}(e,t)||nt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e){return function(e){if(Array.isArray(e))return Je(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||nt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){if(e){if("string"===typeof e)return Je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Je(e,t):void 0}}"function"===typeof Symbol&&Symbol.asyncIterator&&(Ye.prototype[Symbol.asyncIterator]=function(){return this}),Ye.prototype.next=function(e){return this._invoke("next",e)},Ye.prototype.throw=function(e){return this._invoke("throw",e)},Ye.prototype.return=function(e){return this._invoke("return",e)};var at=(0,u.default)((function(){return Promise.all([r.e(9100),r.e(682),r.e(5179)]).then(r.bind(r,35179))}),{loadableGenerated:{webpack:function(){return[35179]}},ssr:!1}),ot=function(e){var t=d()().exec(e);return{render:t&&!t.index,emoji:t}},it=function(e){var t=e.name,r=e.folder,n=function(e){var t=ot(e),r=t.render,n=t.emoji;return r?e.replace(/[0-9][0-9][0-9]?#/,"").replace(n?n[0]:"","").trim():e}(t),a=r?"":(0,x.VT)(n),i=r?n:n.substring(0,n.length-a.length);return(0,o.jsx)("span",{className:"truncate before:float-right before:content-[attr(data-tail)]","data-tail":a,children:i})},ct=function(e){var t=e.child,r=ot(t.name),n=r.render,a=r.emoji;return n?(0,o.jsx)("span",{children:a?a[0]:"\ud83d\udcc1"}):(0,o.jsx)(c.G,{icon:t.file?(0,x.LP)(t.name,{video:Boolean(t.video)}):["far","folder"]})},st=function(e){var t=e.title,r=e.style;return(0,o.jsx)("span",{title:t,className:"".concat(r," rounded"),role:"status",children:(0,o.jsx)(W.H,{className:"svg-inline--fa inline-block h-4 w-4 animate-spin"})})},lt=function(e){var t,r,n,l=e.query,d=(0,i.useState)({}),u=d[0],I=d[1],R=(0,i.useState)(0),F=R[0],T=R[1],G=(0,i.useState)(!1),Z=G[0],E=G[1],L=(0,i.useState)({}),U=L[0],M=L[1],$=(0,f.useRouter)(),_=(0,O.hV)($.asPath),B=tt((0,h.Z)("preferredLayout",V.$[0]),2),q=B[0],J=(B[1],(0,p.$G)().t),K=function(e){if(e){var t=e.path;return t?"/".concat("string"===typeof t?encodeURIComponent(t):t.map((function(e){return encodeURIComponent(e)})).join("/")):"/"}return"/"}(l),X=(0,P.E)(K),Q=X.data,ee=X.error,te=X.size,ae=X.setSize;if(ee)return 403===ee.status?($.push("/onedrive-vercel-index-oauth/step-1"),(0,o.jsx)("div",{})):(0,o.jsx)(re.p,{children:401===ee.status?(0,o.jsx)(Y,{redirect:K}):(0,o.jsx)(H,{errorMsg:JSON.stringify(ee.message)})});if(!Q)return(0,o.jsx)(re.p,{children:(0,o.jsx)(W.Z,{loadingText:J("Loading ...")})});var oe=Q?(t=[]).concat.apply(t,rt(Q)):[],ie=!Q&&!ee||te>0&&Q&&"undefined"===typeof Q[te-1],ce=0===(null===Q||void 0===Q||null===(r=Q[0])||void 0===r?void 0:r.length)||Q&&"undefined"===typeof(null===(n=Q[Q.length-1])||void 0===n?void 0:n.next),se=Q&&"undefined"===typeof Q[0].next;if("folder"in oe[0]){var le,de=(le=[]).concat.apply(le,rt(oe.map((function(e){return e.folder.value})))),ue=de.find((function(e){return"readme.md"===e.name.toLowerCase()})),fe=function(){return de.filter((function(e){return!e.folder&&".password"!==e.name}))},pe=function(e){var t=fe().map((function(t){return Boolean(e[t.id])})),r=[t.some((function(e){return e})),t.some((function(e){return!e}))],n=r[1];return r[0]&&n?1:n?0:2},he={toast:s.ZP,path:K,folderChildren:de,selected:u,toggleItemSelected:function(e){var t;u[e]?delete(t=et({},u))[e]:t=et({},u,Qe({},e,!0)),I(t),T(pe(t))},totalSelected:F,toggleTotalSelected:function(){2==pe(u)?(I({}),T(0)):(I(Object.fromEntries(fe().map((function(e){return[e.id,!0]})))),T(2))},totalGenerating:Z,handleSelectedDownload:function(){var e=K.substring(K.lastIndexOf("/")+1),t=e?decodeURIComponent(e):void 0,r=fe().filter((function(e){return u[e.id]})).map((function(e){return{name:e.name,url:"/api/raw/?path=".concat(K,"/").concat(e.name).concat(_?"&odpt=".concat(_):"")}}));if(1==r.length){var n=document.createElement("a");n.style.display="none",document.body.appendChild(n),n.href=r[0].url,n.click(),n.remove()}else if(r.length>1){E(!0);var a=s.ZP.loading((0,o.jsx)(A,{router:$}));(function(e){return D.apply(this,arguments)})({toastId:a,router:$,files:r,folder:t}).then((function(){E(!1),s.ZP.success(J("Finished downloading selected files."),{id:a})})).catch((function(){E(!1),s.ZP.error(J("Failed to download selected files."),{id:a})}))}},folderGenerating:U,handleFolderDownload:function(e,t,r){return function(){var r;(r=a().mark((function t(){var r,n,o,i,c,l,d,u,f;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,n=!1,t.prev=1,i=Ke(z(e));case 3:return t.next=5,new Xe(i.next());case 5:if(!(r=!(c=t.sent).done)){t.next=16;break}if(l=c.value,d=l.meta,u=l.isFolder,!(f=l.error)){t.next=11;break}return s.ZP.error(J("Failed to download folder {{path}}: {{status}} {{message}} Skipped it to continue.",{status:f.status,message:f.message})),t.abrupt("continue",13);case 11:return t.next=13,{name:null===d||void 0===d?void 0:d.name,isFolder:u};case 13:r=!1,t.next=3;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(1),n=!0,o=t.t0;case 22:if(t.prev=22,t.prev=23,!r||null==i.return){t.next=27;break}return t.next=27,o.return();case 27:if(t.prev=27,!n){t.next=30;break}throw o;case 30:return t.finish(27);case 31:return t.finish(22);case 32:case"end":return t.stop()}}),t,null,[[1,18,22,32],[23,,27,31]])})),function(){return new Ye(r.apply(this,arguments))})();M(et({},U,Qe({},t,!0)));s.ZP.loading((0,o.jsx)(A,{router:$}))}}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.x7,{}),"Grid"===q.name?(0,o.jsx)(qe,et({},he)):(0,o.jsx)(He,et({},he)),!se&&(0,o.jsxs)("div",{className:"rounded-b bg-white dark:bg-gray-900 dark:text-gray-100",children:[(0,o.jsx)("div",{className:"border-b border-gray-200 p-3 text-center font-mono text-sm text-gray-400 dark:border-gray-700",children:J("- showing {{count}} page(s) ",{count:te,totalFileNum:ie?"...":de.length})+J("of {{count}} file(s) -",ie?{count:de.length,context:"loading"}:{count:de.length,context:"loaded"})}),(0,o.jsx)("button",{className:"flex w-full items-center justify-center space-x-2 p-3 disabled:cursor-not-allowed ".concat(ie||ce?"opacity-60":"hover:bg-gray-100 dark:hover:bg-gray-850"),onClick:function(){return ae(te+1)},disabled:ie||ce,children:ie?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(W.H,{className:"inline-block h-4 w-4 animate-spin"}),(0,o.jsx)("span",{children:J("Loading ...")})," "]}):ce?(0,o.jsx)("span",{children:J("No more files")}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:J("Load more")}),(0,o.jsx)(c.G,{icon:"chevron-circle-down"})]})})]}),ue&&(0,o.jsx)("div",{className:"mt-4",children:(0,o.jsx)(xe,{file:ue,path:K,standalone:!1,proxy:!0})})]})}if("file"in oe[0]&&1===oe.length){var me=oe[0].file,ye=function(e,t){var r=S[e];return r?("ts"===e&&(null===t||void 0===t?void 0:t.video)&&(r=j),r):r}((0,x.RT)(me.name),{video:Boolean(me.video)});if(!ye)return(0,o.jsx)(ze,{file:me});switch(ye){case g:return(0,o.jsx)(De,{file:me});case y:return(0,o.jsx)(ne,{file:me});case b:return(0,o.jsx)(ge,{file:me});case m:return(0,o.jsx)(xe,{file:me,path:K});case j:return(0,o.jsx)(Le,{file:me});case w:return(0,o.jsx)(Oe,{file:me});case v:return(0,o.jsx)(Ue,{file:me});case k:return(0,o.jsx)(be,{file:me});case N:return(0,o.jsx)(at,{file:me});case C:return(0,o.jsx)(Me,{file:me});default:return(0,o.jsx)(ze,{file:me})}}return(0,o.jsx)(re.p,{children:(0,o.jsx)(H,{errorMsg:J("Cannot preview {{path}}",{path:K})})})}},19889:function(e,t,r){r.d(t,{$:function(){return f}});var n=r(4637),a=r(59496),o=r(60385),i=r(98296),c=r(74792),s=r(4313),l=r(79038);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(s){c=!0,a=s}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=[{id:1,name:"List",icon:"th-list"},{id:2,name:"Grid",icon:"th"}];t.Z=function(){var e=u((0,l.Z)("preferredLayout",f[0]),2),t=e[0],r=e[1],d=(0,s.$G)().t;return(0,n.jsx)("div",{className:"relative w-24 flex-shrink-0 text-sm text-gray-600 dark:text-gray-300 md:w-28",children:(0,n.jsxs)(i.R,{value:t,onChange:r,children:[(0,n.jsxs)(i.R.Button,{className:"relative w-full cursor-pointer rounded pl-2",children:[(0,n.jsxs)("span",{className:"pointer-events-none flex items-center",children:[(0,n.jsx)(o.G,{className:"mr-2 h-3 w-3",icon:t.icon}),(0,n.jsx)("span",{children:d(t.name)})]}),(0,n.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,n.jsx)(o.G,{className:"h-3 w-3",icon:"chevron-down"})})]}),(0,n.jsx)(c.u,{as:a.Fragment,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:(0,n.jsx)(i.R.Options,{className:"absolute right-0 z-20 mt-1 w-32 overflow-auto rounded border border-gray-900/10 bg-white py-1 shadow-lg focus:outline-none dark:border-gray-500/30 dark:bg-gray-800",children:f.map((function(e){return(0,n.jsxs)(i.R.Option,{className:"".concat(e.name===t.name&&"bg-blue-50 text-blue-700 dark:bg-blue-600/10 dark:text-blue-400"," relative flex cursor-pointer select-none items-center py-1.5 pl-3 text-gray-600 hover:opacity-80 dark:text-gray-300"),value:e,children:[(0,n.jsx)(o.G,{className:"mr-2 h-3 w-3",icon:e.icon}),(0,n.jsx)("span",{className:e.name===t.name?"font-medium":"font-normal",children:d(e.name)}),e.name===t.name&&(0,n.jsx)("span",{className:"absolute inset-y-0 right-3 flex items-center",children:(0,n.jsx)(o.G,{className:"h-3 w-3",icon:"check"})})]},e.id)}))})})]})})}},36810:function(e,t,r){r.d(t,{p:function(){return a},W:function(){return o}});var n=r(4637);function a(e){var t=e.children;return(0,n.jsx)("div",{className:"rounded bg-white p-3 dark:bg-gray-900 dark:text-white",children:t})}function o(e){var t=e.children;return(0,n.jsx)("div",{className:"sticky bottom-0 left-0 right-0 z-10 rounded border-t border-gray-900/10 bg-white bg-opacity-80 p-2 backdrop-blur-md dark:border-gray-500/30 dark:bg-gray-900",children:t})}},5119:function(e,t,r){function n(){return window.location.origin}r.d(t,{S:function(){return n}})},99770:function(e,t,r){function n(e){return e=e.split("/").map((function(e){return decodeURIComponent(e)})).map((function(e){return Array.from(e).map((function(e){return function(e){if(e.charCodeAt(0)<128){if(/^[a-zA-Z0-9\-._~]$/.test(e))return!0;if(/^[*:@,!]$/.test(e))return!0}else if(!/\s|\u180e/.test(e))return!0;return!1}(e)?e:encodeURIComponent(e)})).join("")})).join("/")}r.d(t,{I:function(){return n}})},79038:function(e,t,r){var n=r(59496);t.Z=function(e,t){var r=function(){try{var r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch(n){return console.warn("Error reading localStorage key \u201c".concat(e,"\u201d:"),n),t}},a=(0,n.useState)(r),o=a[0],i=a[1];return(0,n.useEffect)((function(){i(r())}),[]),(0,n.useEffect)((function(){var e=function(){i(r())};return window.addEventListener("storage",e),window.addEventListener("local-storage",e),function(){window.removeEventListener("storage",e),window.removeEventListener("local-storage",e)}}),[]),[o,function(t){try{var r=(n=t,(null!=(a=Function)&&"undefined"!==typeof Symbol&&a[Symbol.hasInstance]?a[Symbol.hasInstance](n):n instanceof a)?t(o):t);window.localStorage.setItem(e,JSON.stringify(r)),i(r),window.dispatchEvent(new Event("local-storage"))}catch(c){console.warn("Error setting localStorage key \u201c".concat(e,"\u201d:"),c)}var n,a}]}}}]);